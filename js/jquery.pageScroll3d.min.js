"use strict";!function(i){function t(t){var s=t.children();t.append('<nav class="s3d__navigation"><ul class="s3d__navigation-list"></ul></nav>'),s.each(function(s){var n=i(this).find("h1").text();s>0&&i(this).css({transform:"rotateX("+-90*s+"deg)","-webkit-transform":"rotateX("+-90*s+"deg)"}),t.find(".s3d__navigation-list").append('<li class="s3d__navigation-item"><a href="#" class="s3d__navigation-link">'+n+"</a></li>")}),t.append('<div class="s3d__content"></div>'),t.find(".s3d__content").append(s),s.addClass("s3d__side")}function s(i){var t=i.find(".s3d__content"),s=t.find(".s3d__side");i.css({perspective:a,"-webkit-perspective":a}),t.add(s).css({"transform-origin":"50% 50% "+-a/2+"px","-webkit-transform-origin":"50% 50% "+-a/2+"px"})}function n(i){i.find(".s3d__side").first().addClass("active"),i.find(".s3d__navigation-item").first().addClass("active")}var e=i(window),a=e.height(),d=0,o=!1;e.on("resize",function(){return a=e.height()});var r={init:function(){return this.each(function(){var a=i(this);a.addClass("s3d"),t(a),s(a),n(a),e.on("resize",function(){s(a)}),i("body").on("mousewheel",function(i){var t,s=a.find(".s3d__content"),n=s.find(".s3d__side"),e=n.filter(".active"),r=a.find(".s3d__navigation-item");o||(o=!0,1==i.deltaY?e.prev().length&&(d-=90):-1==i.deltaY&&e.next().length&&(d+=90)),t=d/90,n.eq(t).addClass("active").siblings().removeClass("active"),s.css({transform:"rotateX("+d+"deg)","-webkit-transform":"rotateX("+d+"deg)"}),setTimeout(function(){o=!1},1e3),r.eq(t).addClass("active").siblings().removeClass("active")}),i(document).on("click",".s3d__navigation-link",function(t){t.preventDefault();var s=i(this),n=s.closest(".s3d__navigation-item"),e=n.index(),a=s.closest(".s3d").find(".s3d__content"),o=a.find(".s3d__side");return d=90*e,n.addClass("active").siblings().removeClass("active"),o.eq(e).addClass("active").siblings().removeClass("active"),a.css({transform:"rotateX("+d+"deg)","-webkit-transform":"rotateX("+d+"deg)"}),d})})},destroy:function(){return this.each(function(){i(this).data("scroll3D");i(window).unbind(".scroll3D")})}};i.fn.scroll3D=function(t){return r[t]?r[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void i.error("Метод с именем "+t+"не существует для jQuery.scroll3D"):r.init.apply(this,arguments)}}(jQuery);